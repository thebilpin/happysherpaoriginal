(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{214:function(e,t,a){"use strict";function n(e,t){var a=t.left,n=t.right,o=t.mirror,r=t.opposite,l=(a?1:0)|(n?2:0)|(o?16:0)|(r?32:0)|(e?64:0);if(d.hasOwnProperty(l))return d[l];if(!o!=!(e&&r)){var s=[n,a];a=s[0],n=s[1]}var i=a?"-100%":n?"100%":"0",u=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+i+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+i+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return d[l]=(0,c.animation)(u),d[l]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,a=(e.out,e.forever),o=e.timeout,r=e.duration,l=void 0===r?c.defaults.duration:r,i=e.delay,u=void 0===i?c.defaults.delay:i,d=e.count,g=void 0===d?c.defaults.count:d,m=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),p={make:n,duration:void 0===o?l:o,delay:u,forever:a,count:g,style:{animationFillMode:"both"}};return m.left,m.right,m.mirror,m.opposite,(0,s.default)(m,p,p,t)}Object.defineProperty(t,"__esModule",{value:!0});var r,l=a(75),s=(r=l)&&r.__esModule?r:{default:r},i=a(2),c=a(55),u={out:i.bool,left:i.bool,right:i.bool,mirror:i.bool,opposite:i.bool,duration:i.number,timeout:i.number,delay:i.number,count:i.number,forever:i.bool},d={};o.propTypes=u,t.default=o,e.exports=t.default},221:function(e,t,a){"use strict";var n=a(5),o=a(6),r=a(8),l=a(7),s=a(9),i=a(0),c=a.n(i),u=a(16),d=a.n(u),g=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn search-navs-btns back-button",style:{position:"relative"},onClick:this.context.router.history.goBack},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(d.a,{duration:"500"})))}}]),t}(i.Component);g.contextTypes={router:function(){return null}},t.a=g},232:function(e,t,a){"use strict";var n=a(236),o=a(0),r=a.n(o),l=a(259),s=a.n(l);t.a=s()(function(e){var t=e.children,a=e.triggerLogin,o=Object(n.a)(e,["children","triggerLogin"]);return r.a.createElement("button",Object.assign({onClick:a},o,{className:o.className}),t)})},273:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!==typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(n,l,s):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(0)),o=["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"];function r(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return t&&c(e.prototype,t),a&&c(e,a),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=h(e);if(t){var o=h(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;return p(e)}(this,a)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(e){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=8,S=37,b=39,E=46,I=32,w=function(e){return"object"===v(e)},O=function(e){d(a,n.PureComponent);var t=m(a);function a(e){var o;return i(this,a),f(p(o=t.call(this,e)),"getClasses",function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(function(e){return!w(e)&&!1!==e}).join(" ")}),f(p(o),"getType",function(){var e=o.props,t=e.isInputSecure,a=e.isInputNum;return t?"password":a?"tel":"text"}),o.input=n.default.createRef(),o}return u(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,a=e.shouldAutoFocus,n=this.input.current;n&&t&&a&&n.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,a=this.input.current;e.focus!==t&&a&&t&&(a.focus(),a.select())}},{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.separator,r=e.isLastChild,i=e.inputStyle,c=e.focus,u=e.isDisabled,d=e.hasErrored,g=e.errorStyle,m=e.focusStyle,p=e.disabledStyle,h=(e.shouldAutoFocus,e.isInputNum),f=e.index,v=e.value,y=e.className,S=(e.isInputSecure,s(e,o));return n.default.createElement("div",{className:y,style:{display:"flex",alignItems:"center"}},n.default.createElement("input",l({"aria-label":"".concat(0===f?"Please enter verification code. ":"").concat(h?"Digit":"Character"," ").concat(f+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},w(i)&&i,c&&w(m)&&m,u&&w(p)&&p,d&&w(g)&&g),placeholder:t,className:this.getClasses(i,c&&m,u&&p,d&&g),type:this.getType(),maxLength:"1",ref:this.input,disabled:u,value:v||""},S)),!r&&a)}}]),a}(),N=function(e){d(a,n.Component);var t=m(a);function a(){var e;i(this,a);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return f(p(e=t.call.apply(t,[this].concat(r))),"state",{activeInput:0}),f(p(e),"getOtpValue",function(){return e.props.value?e.props.value.toString().split(""):[]}),f(p(e),"getPlaceholderValue",function(){var t=e.props,a=t.placeholder,n=t.numInputs;if("string"===typeof a){if(a.length===n)return a;a.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}}),f(p(e),"handleOtpChange",function(t){(0,e.props.onChange)(t.join(""))}),f(p(e),"isInputValueValid",function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"===typeof t)&&1===t.trim().length}),f(p(e),"focusInput",function(t){var a=e.props.numInputs,n=Math.max(Math.min(a-1,t),0);e.setState({activeInput:n})}),f(p(e),"focusNextInput",function(){var t=e.state.activeInput;e.focusInput(t+1)}),f(p(e),"focusPrevInput",function(){var t=e.state.activeInput;e.focusInput(t-1)}),f(p(e),"changeCodeAtFocus",function(t){var a=e.state.activeInput,n=e.getOtpValue();n[a]=t[0],e.handleOtpChange(n)}),f(p(e),"handleOnPaste",function(t){t.preventDefault();var a=e.state.activeInput,n=e.props,o=n.numInputs;if(!n.isDisabled){for(var r=e.getOtpValue(),l=a,s=t.clipboardData.getData("text/plain").slice(0,o-a).split(""),i=0;i<o;++i)i>=a&&s.length>0&&(r[i]=s.shift(),l++);e.setState({activeInput:l},function(){e.focusInput(l),e.handleOtpChange(r)})}}),f(p(e),"handleOnChange",function(t){var a=t.target.value;e.isInputValueValid(a)&&e.changeCodeAtFocus(a)}),f(p(e),"handleOnKeyDown",function(t){t.keyCode===y||"Backspace"===t.key?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput()):t.keyCode===E||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):t.keyCode===S||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):t.keyCode===b||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):t.keyCode!==I&&" "!==t.key&&"Spacebar"!==t.key&&"Space"!==t.key||t.preventDefault()}),f(p(e),"handleOnInput",function(t){if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var a=t.nativeEvent;null===a.data&&"deleteContentBackward"===a.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}}),f(p(e),"renderInputs",function(){for(var t=e.state.activeInput,a=e.props,o=a.numInputs,r=a.inputStyle,l=a.focusStyle,s=a.separator,i=a.isDisabled,c=a.disabledStyle,u=a.hasErrored,d=a.errorStyle,g=a.shouldAutoFocus,m=a.isInputNum,p=a.isInputSecure,h=a.className,f=[],v=e.getOtpValue(),y=e.getPlaceholderValue(),S=e.props["data-cy"],b=e.props["data-testid"],E=function(a){f.push(n.default.createElement(O,{placeholder:y&&y[a],key:a,index:a,focus:t===a,value:v&&v[a],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:a}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:s,inputStyle:r,focusStyle:l,isLastChild:a===o-1,isDisabled:i,disabledStyle:c,hasErrored:u,errorStyle:d,shouldAutoFocus:g,isInputNum:m,isInputSecure:p,className:h,"data-cy":S&&"".concat(S,"-").concat(a),"data-testid":b&&"".concat(b,"-").concat(a)}))},I=0;I<o;I++)E(I);return f}),e}return u(a,[{key:"render",value:function(){var e=this.props.containerStyle;return n.default.createElement("div",{style:Object.assign({display:"flex"},w(e)&&e),className:w(e)?"":e},this.renderInputs())}}]),a}();f(N,"defaultProps",{numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1});var L=N;t.default=L},351:function(e,t,a){"use strict";a.r(t);var n=a(5),o=a(6),r=a(8),l=a(7),s=a(9),i=a(0),c=a.n(i),u=a(48),d=a(99),g=a(98),m=a(221),p=a(47),h=a(324),f=a(363),v=a(217),y=a.n(v),S=a(232),b=a(18),E=a(29),I=a(13),w=a(214),O=a.n(w),N=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(l.a)(t).call(this))).state={loading:!1,email:"",onlyPhone:"",phone:"",password:"",otp:"",accessToken:"",provider:"",error:!1,email_phone_already_used:!1,invalid_otp:!1,showResendOtp:!1,countdownStart:!1,countDownSeconds:30,email_pass_error:!1,countryCodeSelect:"",isFoodomaaAndroidWebView:!1},e.handleInputChange=function(t){"phone"===t.target.name?(e.setState({phone:e.state.countryCodeSelect+t.target.value.replace(/^0+/,"")}),e.setState({onlyPhone:t.target.value.replace(/^0+/,"")})):e.setState(Object(u.a)({},t.target.name,t.target.value.trim()))},e.handleCountryCodeChange=function(t){var a=t.target;e.setState({countryCodeSelect:a.value},function(){e.setState({phone:a.value+e.state.onlyPhone})})},e.handleLogin=function(t){t.preventDefault(),e.validator.fieldValid("email")&&e.validator.fieldValid("password")?(e.setState({loading:!0}),e.props.loginUser(null,e.state.email,e.state.password,null,null,null,e.getLocationFromLocalStorage(),e.state.otp)):(console.log("validation failed"),e.validator.showMessages())},e.handleRegisterAfterSocialLogin=function(t){t.preventDefault(),e.setState({loading:!0}),e.validator.fieldValid("phone")?"true"===localStorage.getItem("enSOV")?e.props.sendOtp(e.state.email,e.state.phone,null).then(function(t){t.payload.otp||e.setState({error:!1})}):e.props.loginUser(e.state.name,e.state.email,null,e.state.accessToken,e.state.phone,e.state.provider,e.getLocationFromLocalStorage(),e.state.otp):(e.setState({loading:!1}),console.log("Validation Failed"),e.validator.showMessages())},e.resendOtp=function(){e.validator.fieldValid("phone")&&(e.setState({countDownSeconds:15,showResendOtp:!1}),e.props.sendOtp(e.state.email,e.state.phone,null).then(function(t){t.payload.otp||e.setState({error:!1})}))},e.handleVerifyOtp=function(t){t.preventDefault(),console.log("verify otp clicked"),e.validator.fieldValid("otp")&&(e.setState({loading:!0}),e.props.verifyOtp(e.state.phone,e.state.otp))},e.handleOnChange=function(t){e.props.getSingleLanguageData(t.target.value),localStorage.setItem("userPreferedLanguage",t.target.value)},e.handleSocialLogin=function(t){"true"===localStorage.getItem("enSOV")?(e.setState({name:t._profile.name,email:t._profile.email,accessToken:t._token.accessToken,provider:t._provider,social_login:!0,loading:!0}),e.props.sendOtp(t._profile.email,null,t._token.accessToken,t._provider).then(function(t){t.payload.otp||e.setState({error:!1})})):(e.setState({name:t._profile.name,email:t._profile.email,accessToken:t._token.accessToken,provider:t._provider,social_login:!0,loading:!0}),e.props.loginUser(t._profile.name,t._profile.email,null,t._token.accessToken,null,t._provider,e.getLocationFromLocalStorage(),e.state.otp))},e.handleSocialLoginFailure=function(e){console.log("Social Login Error",e)},e.handleCountDown=function(){setTimeout(function(){e.setState({showResendOtp:!0}),clearInterval(e.intervalID)},31e3),e.intervalID=setInterval(function(){console.log("interval going on"),e.setState({countDownSeconds:e.state.countDownSeconds-1})},1e3)},e.processDefaultCountryCode=function(){var t=localStorage.getItem("phoneCountryCode").split(",");return 0===t.length?c.a.createElement("span",{className:"country-code"}):1===t.length?c.a.createElement("span",{className:"country-code"},t[0].replace(/\s/g,"")):t.length>1?c.a.createElement("select",{name:"countryCodeSelect",onChange:e.handleCountryCodeChange,className:"country-code--dropdown"},t.map(function(e){return c.a.createElement("option",{key:e,value:e.replace(/\s/g,"")},e.replace(/\s/g,""))})):void 0},e.getLocationFromLocalStorage=function(){var e=JSON.parse(localStorage.getItem("userSetAddress"));return null===e?null:e.hasOwnProperty("businessLocation")?null:e},e.validator=new y.a({autoForceUpdate:Object(d.a)(Object(d.a)(e)),messages:{required:localStorage.getItem("fieldValidationMsg"),email:localStorage.getItem("emailValidationMsg"),regex:localStorage.getItem("phoneValidationMsg")}}),e}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("phoneCountryCode").split(",");this.setState({countryCodeSelect:t[0].replace(/\s/g,"")}),"false"===localStorage.getItem("enableFacebookLogin")&&"false"===localStorage.getItem("enableGoogleLogin")&&document.getElementById("socialLoginDiv")&&document.getElementById("socialLoginDiv").classList.add("hidden"),"true"!==localStorage.getItem("enableFacebookLogin")&&"true"!==localStorage.getItem("enableGoogleLogin")||setTimeout(function(){e.refs.socialLogin&&e.refs.socialLogin.classList.remove("hidden"),e.refs.socialLoginLoader&&e.refs.socialLoginLoader.classList.add("hidden")},500),"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&this.setState({isFoodomaaAndroidWebView:!0})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.user!==e.user&&this.setState({loading:!1}),e.user.success){if(null!==e.user.data.default_address){var t={lat:e.user.data.default_address.latitude,lng:e.user.data.default_address.longitude,address:e.user.data.default_address.address,house:e.user.data.default_address.house,tag:e.user.data.default_address.tag};localStorage.setItem("userSetAddress",JSON.stringify(t))}"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.registerFcm(e.user.data.auth_token)}if(e.user.email_phone_already_used&&this.setState({email_phone_already_used:!0}),e.user.otp&&(this.setState({email_phone_already_used:!1,error:!1}),document.getElementById("loginForm").classList.add("hidden"),document.getElementById("socialLoginDiv").classList.add("hidden"),document.getElementById("phoneFormAfterSocialLogin").classList.add("hidden"),document.getElementById("otpForm").classList.remove("hidden"),this.setState({countdownStart:!0}),this.handleCountDown(),this.validator.hideMessages()),e.user.valid_otp&&(this.setState({invalid_otp:!1,error:!1,loading:!0}),this.state.social_login?this.props.loginUser(this.state.name,this.state.email,null,this.state.accessToken,this.state.phone,this.state.provider,this.getLocationFromLocalStorage(),this.state.otp):this.props.registerUser(this.state.name,this.state.email,this.state.phone,this.state.password,this.getLocationFromLocalStorage(),this.state.otp),console.log("VALID OTP, REG USER NOW")),!1===e.user.valid_otp&&(console.log("Invalid OTP"),this.setState({invalid_otp:!0})),e.user||this.setState({error:!0}),e.user.proceed_login&&(this.setState({loading:!0}),console.log("From Social : user already exists"),this.props.loginUser(this.state.name,this.state.email,null,this.state.accessToken,null,this.state.provider,this.getLocationFromLocalStorage(),this.state.otp)),e.user.enter_phone_after_social_login&&(this.validator.hideMessages(),document.getElementById("loginForm").classList.add("hidden"),document.getElementById("socialLoginDiv").classList.add("hidden"),document.getElementById("phoneFormAfterSocialLogin").classList.remove("hidden"),console.log("ask to fill the phone number and send otp process...")),"DONOTMATCH"===e.user.data&&this.setState({error:!1,email_pass_error:!0}),this.props.languages!==e.languages)if(localStorage.getItem("userPreferedLanguage"))this.props.getSingleLanguageData(localStorage.getItem("userPreferedLanguage"));else if(e.languages.length){console.log("Fetching Translation Data...");var a=e.languages.filter(function(e){return 1===e.is_default})[0].id;this.props.getSingleLanguageData(a)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){if(window.innerWidth>768)return c.a.createElement(f.a,{to:"/"});if(null===localStorage.getItem("storeColor"))return c.a.createElement(f.a,{to:"/"});if(this.props.user.success)return"1"===localStorage.getItem("fromCartToLogin")?(localStorage.removeItem("fromCartToLogin"),c.a.createElement(f.a,{to:"/cart"})):c.a.createElement(f.a,{to:"/my-account"});var e=this.props.languages;return console.log(this.state.phone),c.a.createElement(c.a.Fragment,null,this.state.error&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("loginErrorMessage"))),this.state.email_phone_already_used&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("emailPhoneAlreadyRegistered"))),this.state.invalid_otp&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("invalidOtpMsg"))),this.state.email_pass_error&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("emailPassDonotMatch"))),this.state.loading&&c.a.createElement(I.a,null),c.a.createElement("div",{className:"cust-auth-header"},c.a.createElement("div",{className:"input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement(m.a,{history:this.props.history}))),c.a.createElement(O.a,{right:!0,delay:500},c.a.createElement("img",{src:"/assets/img/various/login-illustration.png",className:"login-image pull-right",alt:"login-header"})),c.a.createElement("div",{className:"login-texts px-15 mt-30 pb-20"},c.a.createElement("span",{className:"login-title"},localStorage.getItem("loginLoginTitle")),c.a.createElement("br",null),c.a.createElement("span",{className:"login-subtitle"},localStorage.getItem("loginLoginSubTitle")))),c.a.createElement("div",{className:"bg-white"},c.a.createElement("form",{onSubmit:this.handleLogin,id:"loginForm"},c.a.createElement("div",{className:"form-group px-15 pt-30"},c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement("input",{type:"text",name:"email",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:localStorage.getItem("loginLoginEmailLabel")}),this.validator.message("email",this.state.email,"required|email")),c.a.createElement("div",{className:"col-md-9"},c.a.createElement("input",{type:"password",name:"password",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:localStorage.getItem("loginLoginPasswordLabel")}),this.validator.message("password",this.state.password,"required"))),c.a.createElement("div",{className:"mt-20 mx-15 d-flex justify-content-center"},c.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor"),width:"90%",borderRadius:"4px"}},localStorage.getItem("firstScreenLoginBtn")))),c.a.createElement("form",{onSubmit:this.handleVerifyOtp,id:"otpForm",className:"hidden"},c.a.createElement("div",{className:"form-group px-15 pt-30"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement("input",{name:"otp",type:"tel",onChange:this.handleInputChange,className:"form-control auth-input",required:!0,placeholder:localStorage.getItem("otpSentMsg")}),this.validator.message("otp",this.state.otp,"required|numeric|min:4|max:6")),c.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("verifyOtpBtnText")),c.a.createElement("div",{className:"mt-30 mb-10"},this.state.showResendOtp&&c.a.createElement("div",{className:"resend-otp",onClick:this.resendOtp},localStorage.getItem("resendOtpMsg")," ",this.state.phone),this.state.countDownSeconds>0&&c.a.createElement("div",{className:"resend-otp countdown"},localStorage.getItem("resendOtpCountdownMsg")," ",this.state.countDownSeconds)))),c.a.createElement("form",{onSubmit:this.handleRegisterAfterSocialLogin,id:"phoneFormAfterSocialLogin",className:"hidden"},c.a.createElement("div",{className:"form-group px-15 pt-30"},c.a.createElement("label",{className:"col-12 auth-input-label"},localStorage.getItem("socialWelcomeText")," ",this.state.name,","),c.a.createElement("label",{className:"col-12 auth-input-label"},localStorage.getItem("enterPhoneToVerify")," "),c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement("div",null,this.processDefaultCountryCode(),c.a.createElement("span",null,c.a.createElement("input",{name:"phone",type:"tel",onChange:this.handleInputChange,className:"form-control phone-number-country-code auth-input"}),this.validator.message("phone",this.state.phone,["required",{regex:["^\\+[1-9]\\d{1,14}$"]},{min:["8"]}])))),c.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("registerRegisterTitle")))),!this.state.isFoodomaaAndroidWebView&&c.a.createElement("div",{className:"text-center mt-3 mb-20",id:"socialLoginDiv"},c.a.createElement("p",{className:"login-or mt-4"}," ",localStorage.getItem("socialLoginOrText")," "),c.a.createElement("div",{ref:"socialLoginLoader"},c.a.createElement(p.a,{height:60,width:400,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},c.a.createElement("rect",{x:"28",y:"0",rx:"0",ry:"0",width:"165",height:"45"}),c.a.createElement("rect",{x:"210",y:"0",rx:"0",ry:"0",width:"165",height:"45"}))),c.a.createElement("div",{ref:"socialLogin",className:"hidden d-flex justify-content-center align-items-center"},"true"===localStorage.getItem("enableFacebookLogin")&&c.a.createElement(S.a,{provider:"facebook",appId:localStorage.getItem("facebookAppId"),onLoginSuccess:this.handleSocialLogin,onLoginFailure:this.handleSocialLoginFailure,className:"facebook-login-button mr-3"},c.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.a.createElement("div",null,c.a.createElement("img",{src:"/assets/img/various/facebook.png",alt:"Facebook Login",className:"img-fluid",style:{width:"18px",marginRight:"10px"}})),c.a.createElement("div",{style:{fontSize:"14px"}},localStorage.getItem("facebookLoginButtonText")))),"true"===localStorage.getItem("enableGoogleLogin")&&c.a.createElement(S.a,{provider:"google",appId:localStorage.getItem("googleAppId"),onLoginSuccess:this.handleSocialLogin,onLoginFailure:this.handleSocialLoginFailure,className:"google-login-button"},c.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.a.createElement("div",null,c.a.createElement("img",{src:"/assets/img/various/google.png",alt:"Google Login",className:"img-fluid",style:{width:"18px",marginRight:"10px"}})),c.a.createElement("div",{style:{fontSize:"14px"}},localStorage.getItem("googleLoginButtonText")))))),c.a.createElement("div",null,c.a.createElement("div",{className:"wave-container login-bottom-wave"},c.a.createElement("svg",{viewBox:"0 0 120 28",className:"wave-svg"},c.a.createElement("defs",null,c.a.createElement("filter",{id:"goo"},c.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1",result:"blur"}),c.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 13 -9",result:"goo"}),c.a.createElement("xfeBlend",{in:"SourceGraphic",in2:"goo"})),c.a.createElement("path",{id:"wave",d:"M 0,10 C 30,10 30,15 60,15 90,15 90,10 120,10 150,10 150,15 180,15 210,15 210,10 240,10 v 28 h -240 z"})),c.a.createElement("use",{id:"wave3",className:"wave",xlinkHref:"#wave",x:"0",y:"-2"}),c.a.createElement("use",{id:"wave2",className:"wave",xlinkHref:"#wave",x:"0",y:"0"})))),c.a.createElement("div",{className:"text-center mt-50 mb-20 auth-reg-text-block"},localStorage.getItem("loginDontHaveAccount")," ",c.a.createElement(h.a,{to:"/register",style:{color:localStorage.getItem("storeColor")},className:"auth-reg-link"},localStorage.getItem("firstScreenRegisterBtn")))),"true"===localStorage.getItem("enPassResetEmail")&&c.a.createElement("div",{className:"mt-4 d-flex align-items-center justify-content-center"},c.a.createElement(h.a,{to:"/login/forgot-password",style:{color:localStorage.getItem("storeColor")},className:"auth-forgot-password-btn"},localStorage.getItem("forgotPasswordLinkText"))),"null"!==localStorage.getItem("registrationPolicyMessage")?c.a.createElement("div",{className:"mt-20 mb-20 d-flex align-items-center justify-content-center auth-custom-msg-block",dangerouslySetInnerHTML:{__html:localStorage.getItem("registrationPolicyMessage")}}):c.a.createElement("div",{className:"mb-100"}),e&&e.length>1&&c.a.createElement("div",{className:"mt-4 d-flex align-items-center justify-content-center mb-100"},c.a.createElement("div",{className:"mr-2"},localStorage.getItem("changeLanguageText")),c.a.createElement("select",{onChange:this.handleOnChange,defaultValue:localStorage.getItem("userPreferedLanguage")?localStorage.getItem("userPreferedLanguage"):e.filter(function(e){return 1===e.is_default})[0].id,className:"form-control language-select"},e.map(function(e){return c.a.createElement("option",{value:e.id,key:e.id},e.language_name)}))))}}]),t}(i.Component);N.contextTypes={router:function(){return null}};var L=Object(b.b)(function(e){return{user:e.user.user,language:e.languages.language,languages:e.languages.languages}},{loginUser:g.h,registerUser:g.l,sendOtp:g.n,verifyOtp:g.q,getSingleLanguageData:E.b})(N),C=a(56),_=a(273),k=a.n(_),x=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(l.a)(t).call(this))).state={loading:!1,email:"",phone:"",password:"",otp:"",numInputs:"6",error:!1,email_phone_already_used:!1,invalid_otp:!1,showResendOtp:!1,countdownStart:!1,countDownSeconds:30,email_pass_error:!1,countryCodeSelect:"",newUser:!1},e.handleInputChange=function(t){"phone"===t.target.name?(e.setState({phone:e.state.countryCodeSelect+t.target.value.replace(/^0+/,"")}),e.setState({onlyPhone:t.target.value.replace(/^0+/,"")})):e.setState(Object(u.a)({},t.target.name,t.target.value.trim()))},e.handleOtpInput=function(t){return e.setState({otp:t})},e.handleCountryCodeChange=function(t){var a=t.target;e.setState({countryCodeSelect:a.value},function(){e.setState({phone:a.value+e.state.onlyPhone})})},e.__sendOtp=function(t){t.preventDefault(),!e.state.newUser&&e.validator.fieldValid("phone")?(e.setState({loading:!0}),e.props.generateOtpForLogin(e.state.phone,e.state.email)):e.state.newUser&&e.validator.fieldValid("phone")&&e.validator.fieldValid("email")?(e.setState({loading:!0}),e.props.generateOtpForLogin(e.state.phone,e.state.email)):(e.setState({loading:!1}),console.log("validation failed"),e.validator.showMessages())},e.__loginWithOtp=function(t){t.preventDefault(),e.props.loginWithOtp(e.state.phone,e.state.otp,e.state.name,e.state.email,e.getLocationFromLocalStorage()),e.setState({loading:!0})},e.handleCountDown=function(){setTimeout(function(){e.setState({showResendOtp:!0}),clearInterval(e.intervalID)},31e3),e.intervalID=setInterval(function(){console.log("interval going on"),e.setState({countDownSeconds:e.state.countDownSeconds-1})},1e3)},e.resendOtp=function(){e.validator.fieldValid("phone")&&(e.setState({countDownSeconds:15,showResendOtp:!1}),e.props.generateOtpForLogin(e.state.phone,e.state.email).then(function(t){t.payload.otp||e.setState({error:!1})}))},e.handleOnChange=function(t){e.props.getSingleLanguageData(t.target.value),localStorage.setItem("userPreferedLanguage",t.target.value)},e.handleCountDown=function(){setTimeout(function(){e.setState({showResendOtp:!0}),clearInterval(e.intervalID)},31e3),e.intervalID=setInterval(function(){console.log("interval going on"),e.setState({countDownSeconds:e.state.countDownSeconds-1})},1e3)},e.processDefaultCountryCode=function(){var t=localStorage.getItem("phoneCountryCode").split(",");return 0===t.length?c.a.createElement("span",{className:"country-code"}):1===t.length?c.a.createElement("span",{className:"country-code"},t[0].replace(/\s/g,"")):t.length>1?c.a.createElement("select",{name:"countryCodeSelect",onChange:e.handleCountryCodeChange,className:"country-code--dropdown"},t.map(function(e){return c.a.createElement("option",{key:e,value:e.replace(/\s/g,"")},e.replace(/\s/g,""))})):void 0},e.getLocationFromLocalStorage=function(){var e=JSON.parse(localStorage.getItem("userSetAddress"));return null===e?null:e.hasOwnProperty("businessLocation")?null:e},e.validator=new y.a({autoForceUpdate:Object(d.a)(Object(d.a)(e)),messages:{required:localStorage.getItem("fieldValidationMsg"),email:localStorage.getItem("emailValidationMsg"),regex:localStorage.getItem("phoneValidationMsg")}}),e}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("phoneCountryCode").split(",");this.setState({countryCodeSelect:e[0].replace(/\s/g,"")})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.user!==e.user&&this.setState({loading:!1}),e.user.success){if(null!==e.user.data.default_address){var t={lat:e.user.data.default_address.latitude,lng:e.user.data.default_address.longitude,address:e.user.data.default_address.address,house:e.user.data.default_address.house,tag:e.user.data.default_address.tag};localStorage.setItem("userSetAddress",JSON.stringify(t))}"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.registerFcm(e.user.data.auth_token)}if(e.user.email_phone_already_used&&this.setState({email_phone_already_used:!0}),e.user.otp&&(this.setState({email_phone_already_used:!1,error:!1}),document.getElementById("loginForm").classList.add("hidden"),document.getElementById("otpForm").classList.remove("hidden"),this.setState({countdownStart:!0}),this.handleCountDown(),this.validator.hideMessages()),!e.user.otp&&e.user.new_user&&(console.log("New User"),this.setState({newUser:!0}),this.validator.hideMessages()),e.user||this.setState({error:!0}),e.user.enter_phone_after_social_login&&(this.validator.hideMessages(),document.getElementById("loginForm").classList.add("hidden"),console.log("ask to fill the phone number and send otp process...")),"DONOTMATCH"===e.user.data&&this.setState({error:!1,email_pass_error:!1,invalid_otp:!0}),this.props.languages!==e.languages)if(localStorage.getItem("userPreferedLanguage"))this.props.getSingleLanguageData(localStorage.getItem("userPreferedLanguage"));else if(e.languages.length){console.log("Fetching Translation Data...");var a=e.languages.filter(function(e){return 1===e.is_default})[0].id;this.props.getSingleLanguageData(a)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){if(window.innerWidth>768)return c.a.createElement(f.a,{to:"/"});if(null===localStorage.getItem("storeColor"))return c.a.createElement(f.a,{to:"/"});if(this.props.user.success)return"1"===localStorage.getItem("fromCartToLogin")?(localStorage.removeItem("fromCartToLogin"),c.a.createElement(f.a,{to:"/cart"})):c.a.createElement(f.a,{to:"/my-account"});var e=this.props.languages;return c.a.createElement(c.a.Fragment,null,this.state.error&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("loginErrorMessage"))),this.state.email_phone_already_used&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("emailPhoneAlreadyRegistered"))),this.state.invalid_otp&&c.a.createElement("div",{className:"auth-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("invalidOtpMsg"))),this.state.loading&&c.a.createElement(I.a,null),c.a.createElement("div",{className:"cust-auth-header"},c.a.createElement("div",{className:"input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement(m.a,{history:this.props.history}))),c.a.createElement(O.a,{right:!0,delay:500},c.a.createElement("img",{src:"/assets/img/various/login-illustration.png",className:"login-image pull-right",alt:"login-header"})),c.a.createElement("div",{className:"login-texts px-15 mt-30 pb-20"},this.state.newUser?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"login-title"},localStorage.getItem("registerRegisterTitle")),c.a.createElement("br",null),c.a.createElement("span",{className:"login-subtitle"},localStorage.getItem("registerRegisterSubTitle"))):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"login-title"},localStorage.getItem("loginLoginTitle")),c.a.createElement("br",null),c.a.createElement("span",{className:"login-subtitle"},localStorage.getItem("loginLoginSubTitle"))))),c.a.createElement("div",{className:"bg-white"},c.a.createElement("form",{onSubmit:this.__sendOtp,id:"loginForm"},c.a.createElement("div",{className:"form-group px-15 pt-30"},c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement("div",null,this.processDefaultCountryCode(),c.a.createElement("span",null,c.a.createElement("input",{name:"phone",type:"tel",onChange:this.handleInputChange,className:"form-control phone-number-country-code auth-input",placeholder:localStorage.getItem("loginLoginPhoneLabel")}),this.validator.message("phone",this.state.phone,["required",{regex:["^\\+[1-9]\\d{1,14}$"]},{min:["8"]}])))),this.state.newUser&&c.a.createElement("div",{id:"newUserFields"},c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement("input",{type:"text",name:"name",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:localStorage.getItem("loginLoginNameLabel")}),this.validator.message("name",this.state.name,"required|string")),c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement("input",{type:"text",name:"email",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:localStorage.getItem("loginLoginEmailLabel")}),this.validator.message("email",this.state.email,"required|email")))),c.a.createElement("div",{className:"mt-20 mx-10 d-flex justify-content-center"},c.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor"),width:"90%",borderRadius:"4px"}},this.state.newUser?localStorage.getItem("registerRegisterTitle"):localStorage.getItem("firstScreenLoginBtn")))),c.a.createElement("form",{onSubmit:this.__loginWithOtp,id:"otpForm",className:"hidden"},c.a.createElement("div",{className:"form-group px-15 pt-30"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(k.a,{value:this.state.otp,onChange:this.handleOtpInput,numInputs:this.state.numInputs,isInputNum:!0,containerStyle:"login-with-otp-input-container",inputStyle:"login-with-otp-input",shouldAutoFocus:!0})),c.a.createElement("div",{className:"col-md-9 mt-20"},c.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor"),borderRadius:"4px"},disabled:this.state.otp.length<this.state.numInputs},localStorage.getItem("verifyOtpBtnText"))),c.a.createElement("div",{className:"mt-30 mb-10"},this.state.showResendOtp&&c.a.createElement("div",{className:"resend-otp",onClick:this.resendOtp},localStorage.getItem("resendOtpMsg")," ",this.state.phone),this.state.countDownSeconds>0&&c.a.createElement("div",{className:"resend-otp countdown"},localStorage.getItem("resendOtpCountdownMsg")," ",this.state.countDownSeconds)))),c.a.createElement("div",null,c.a.createElement("div",{className:"wave-container login-bottom-wave"},c.a.createElement("svg",{viewBox:"0 0 120 28",className:"wave-svg"},c.a.createElement("defs",null,c.a.createElement("filter",{id:"goo"},c.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1",result:"blur"}),c.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 13 -9",result:"goo"}),c.a.createElement("xfeBlend",{in:"SourceGraphic",in2:"goo"})),c.a.createElement("path",{id:"wave",d:"M 0,10 C 30,10 30,15 60,15 90,15 90,10 120,10 150,10 150,15 180,15 210,15 210,10 240,10 v 28 h -240 z"})),c.a.createElement("use",{id:"wave3",className:"wave",xlinkHref:"#wave",x:"0",y:"-2"}),c.a.createElement("use",{id:"wave2",className:"wave",xlinkHref:"#wave",x:"0",y:"0"}))))),this.state.newUser&&c.a.createElement(c.a.Fragment,null,"null"!==localStorage.getItem("registrationPolicyMessage")?c.a.createElement("div",{className:"mt-20 mb-20 d-flex align-items-center justify-content-center auth-custom-msg-block",dangerouslySetInnerHTML:{__html:localStorage.getItem("registrationPolicyMessage")}}):c.a.createElement("div",{className:"mb-100"})),e&&e.length>1&&c.a.createElement("div",{className:"mt-4 d-flex align-items-center justify-content-center mb-100"},c.a.createElement("div",{className:"mr-2"},localStorage.getItem("changeLanguageText")),c.a.createElement("select",{onChange:this.handleOnChange,defaultValue:localStorage.getItem("userPreferedLanguage")?localStorage.getItem("userPreferedLanguage"):e.filter(function(e){return 1===e.is_default})[0].id,className:"form-control language-select"},e.map(function(e){return c.a.createElement("option",{value:e.id,key:e.id},e.language_name)}))))}}]),t}(i.Component);x.contextTypes={router:function(){return null}};var D=Object(b.b)(function(e){return{user:e.user.user,language:e.languages.language,languages:e.languages.languages}},{loginWithOtp:g.i,generateOtpForLogin:g.e,getSingleLanguageData:E.b})(x),F=function(e){function t(){var e,a;Object(n.a)(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(a=Object(r.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={enOLnR:""},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.settings&&this.props.settings.find(function(e){return"enOLnR"===e.key});this.setState({enOLnR:e.value})}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,{seotitle:localStorage.getItem("seoMetaTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),"true"===this.state.enOLnR?c.a.createElement(D,null):c.a.createElement(L,null))}}]),t}(i.Component);t.default=Object(b.b)(function(e){return{settings:e.settings.settings}},{})(F)}}]);